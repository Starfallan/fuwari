---
import { encrypt } from "@utils/password-encrypt-utils";
import PasswordUnlock from "./PasswordUnlock.astro";

export interface Props {
	password?: string;
}

const { password } = Astro.props;

// 获取slot内容
const html = await Astro.slots.render("default");

// 如果有密码则加密内容
const encryptedContent = password ? await encrypt(html, password) : null;
---

{password ? (
	<PasswordUnlock password={password} encryptedContent={encryptedContent!} />
) : (
	<Fragment set:html={html} />
)}
